N, M = map(int, input().split())
matrix = []
for row in range(N):
    matrix.append(list(map(int, input().split())))


shape = [[[0,0],[0,1],[0,2],[0,3]],[[0,0],[1,0],[2,0],[3,0]], # 1자
         [[0,0],[0,1],[1,0],[1,1]], # 네모
         [[0,0],[0,1],[0,2],[-1,2]], [[0,0],[0,1],[0,2],[1,2]], [[0,0],[-1,0],[0,1],[0,2]], [[0,0],[1,0],[0,1],[0,2]],
         [[0,0],[1,0],[2,0],[2,1]], [[0,0],[0,1],[1,0],[2,0]], [[0,0],[0,1],[1,1],[2,1]],[[0,0],[0,1],[-1,1],[-2,1]], # 기역자
         [[0,0],[1,0],[1,1],[2,1]], [[0,0],[1,0],[1,-1],[2,-1]], [[0,0],[0,1],[-1,1],[-1,2]],[[0,0],[0,1],[1,1],[1,2]],  # 지그재그
         [[0,0],[0,1],[0,2],[1,1]], [[0,0],[0,1],[0,2],[-1,1]], [[0,0],[1,0],[2,0],[1,1]], [[0,0],[1,0],[2,0],[1,-1]]] # ㅗ자

max_value = -1

for y in range(N):
    for x in range(M):
        for arr in shape:
            chk_value = 0
            chk = True
            for i in arr:
                if y + i[0] < 0 or y + i[0] > N - 1 or x + i[1] < 0 or x + i[1] > M - 1:
                    chk = False
                    break
                else:
                    chk_value += matrix[y+i[0]][x+i[1]]
            if chk:
                max_value = max(max_value, chk_value)
print(max_value)
